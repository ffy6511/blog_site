<!DOCTYPE html><html lang="zh-CN" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.15.11"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://example.com/blog/data_structure/"><!-- Primary Meta Tags --><title>Data Structure</title><meta name="title" content="Data Structure"><meta name="description" content="Lorem ipsum dolor sit amet"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://example.com/blog/data_structure/"><meta property="og:title" content="Data Structure"><meta property="og:description" content="Lorem ipsum dolor sit amet"><meta property="og:image" content="https://example.com/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://example.com/blog/data_structure/"><meta property="twitter:title" content="Data Structure"><meta property="twitter:description" content="Lorem ipsum dolor sit amet"><meta property="twitter:image" content="https://example.com/blog-placeholder-1.jpg"><!-- 添加 MathJax --><link rel="stylesheet" href="/_astro/about.p0Xls8-U.css">
<style>a[data-astro-cid-eimmu3lg]{display:inline-block;text-decoration:none}a[data-astro-cid-eimmu3lg].active{font-weight:bolder;text-decoration:underline}
.bio[data-astro-cid-2jiluk5e]{padding:1.5rem;border-radius:8px;background:rgba(var(--gray-light),.1);margin:2rem 0}.bio[data-astro-cid-2jiluk5e] h2[data-astro-cid-2jiluk5e]{font-size:1.5rem;margin-bottom:1rem}.bio-content[data-astro-cid-2jiluk5e]{display:flex;gap:1rem;align-items:center}.avatar[data-astro-cid-2jiluk5e]{width:80px;height:80px;border-radius:50%;object-fit:cover}.bio-text[data-astro-cid-2jiluk5e]{flex:1}.name[data-astro-cid-2jiluk5e]{font-size:1rem;font-weight:700;margin:0;color:#373535}.description[data-astro-cid-2jiluk5e]{margin:.5rem 0 0;font-size:.95rem;line-height:1.5}@media (max-width: 720px){.bio-content[data-astro-cid-2jiluk5e]{flex-direction:column;text-align:center}}
.toc[data-astro-cid-xvrfupwn]{position:fixed;right:0;top:2rem;width:150px;max-height:80vh;overflow-y:auto;background:#fff;padding:1.5rem;border-left:1px solid #eee;border-radius:8px;box-shadow:0 2px 8px #0000001a}.toc[data-astro-cid-xvrfupwn] ul[data-astro-cid-xvrfupwn]{list-style:none;padding:0;margin:0}.toc[data-astro-cid-xvrfupwn] li[data-astro-cid-xvrfupwn]{margin-bottom:.5rem;padding-left:1rem}#toc-list[data-astro-cid-xvrfupwn] a[data-astro-cid-xvrfupwn]{color:#4a5568!important;text-decoration:none;font-size:.95rem;line-height:1.4;transition:color .2s}.toc[data-astro-cid-xvrfupwn] a[data-astro-cid-xvrfupwn]:hover{color:#2b6cb0}.toc[data-astro-cid-xvrfupwn] li[data-astro-cid-xvrfupwn].active>a[data-astro-cid-xvrfupwn]{color:#2b6cb0;font-weight:600}main[data-astro-cid-bvzihdzo]{width:calc(100% - 2em);max-width:100%;margin:0}.prose[data-astro-cid-bvzihdzo]{width:720px;max-width:calc(100% - 2em);margin:auto 300px auto auto;padding:1em;color:rgb(var(--gray-dark))}@media (max-width: 1024px){.prose[data-astro-cid-bvzihdzo]{margin:auto}}.hero-image[data-astro-cid-bvzihdzo]{width:100%}.hero-image[data-astro-cid-bvzihdzo] img[data-astro-cid-bvzihdzo]{display:block;margin:0 auto;border-radius:12px;box-shadow:var(--box-shadow)}.prose[data-astro-cid-bvzihdzo]{width:720px;max-width:calc(100% - 2em);margin:auto;padding:1em;color:rgb(var(--gray-dark))}.title[data-astro-cid-bvzihdzo]{margin-bottom:1em;padding:1em 0;text-align:center;line-height:1}.title[data-astro-cid-bvzihdzo] h1[data-astro-cid-bvzihdzo]{margin:0 0 .5em}.date[data-astro-cid-bvzihdzo]{margin-bottom:.5em;color:rgb(var(--gray))}.last-updated-on[data-astro-cid-bvzihdzo]{font-style:italic}
</style><script type="module" src="/_astro/hoisted.CQgWB0-B.js"></script></head> <body data-astro-cid-bvzihdzo> <header data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2><a href="/" data-astro-cid-3ef6ksr2>待抉的博客</a></h2> <div class="internal-links" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Home </a>  <a href="/blog" class="active" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Blog </a>  <a href="/about" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> About </a>  </div> <div class="social-links" data-astro-cid-3ef6ksr2> <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark mode" data-astro-cid-x3pjskd3> <svg width="24" height="24" viewBox="0 0 24 24" class="sun" data-astro-cid-x3pjskd3> <path fill="currentColor" d="M12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16ZM11 1H13V4H11V1ZM11 20H13V23H11V20ZM3.51472 4.92893L4.92893 3.51472L7.05025 5.63604L5.63604 7.05025L3.51472 4.92893ZM16.9497 18.364L18.364 16.9497L20.4853 19.0711L19.0711 20.4853L16.9497 18.364ZM19.0711 3.51472L20.4853 4.92893L18.364 7.05025L16.9497 5.63604L19.0711 3.51472ZM5.63604 16.9497L7.05025 18.364L4.92893 20.4853L3.51472 19.0711L5.63604 16.9497ZM23 11V13H20V11H23ZM4 11V13H1V11H4Z" data-astro-cid-x3pjskd3></path> </svg> <svg width="24" height="24" viewBox="0 0 24 24" class="moon" data-astro-cid-x3pjskd3> <path fill="currentColor" d="M10 7C10 10.866 13.134 14 17 14C18.9584 14 20.729 13.1957 21.9995 11.8995C22 11.933 22 11.9665 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C12.0335 2 12.067 2 12.1005 2.00049C10.8043 3.27098 10 5.04157 10 7ZM4 12C4 16.4183 7.58172 20 12 20C15.0583 20 17.7158 18.2839 19.062 15.7621C18.3945 15.9187 17.7035 16 17 16C12.0294 16 8 11.9706 8 7C8 6.29648 8.08133 5.60547 8.2379 4.938C5.71611 6.28423 4 8.94174 4 12Z" data-astro-cid-x3pjskd3></path> </svg> </button>   <a href="https://m.webtoo.ls/@astro" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Follow Astro on Mastodon</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z" data-astro-cid-3ef6ksr2></path></svg> </a> <a href="https://twitter.com/astrodotbuild" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Follow Astro on Twitter</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z" data-astro-cid-3ef6ksr2></path></svg> </a> <a href="https://github.com/withastro/astro" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Astro's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-3ef6ksr2></path></svg> </a> </div> </nav> </header>  <main data-astro-cid-bvzihdzo> <article data-astro-cid-bvzihdzo> <div class="hero-image" data-astro-cid-bvzihdzo> <img width="1020" height="510" src="/blog-placeholder-2.jpg" alt="" data-astro-cid-bvzihdzo> </div> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <div class="date" data-astro-cid-bvzihdzo> <time datetime="2024-12-23T16:00:00.000Z"> Dec 24, 2024 </time>  </div> <h1 data-astro-cid-bvzihdzo>Data Structure</h1> <hr data-astro-cid-bvzihdzo> </div>  <h2 id="leftist-heap">Leftist heap</h2>
<h4 id="concepts">Concepts</h4>
<ul>
<li>外节点：a node without 2 children;</li>
<li><code>null path length</code>：从当前节点到最近的外节点所经过的边数；
<ul>
<li>空节点的<code>Npl</code>为<code>-1</code>，外节点的<code>Npl</code>为<code>0</code>；</li>
</ul>
</li>
<li>需要满足的性质：
<ol>
<li>堆的性质；</li>
<li><strong>左偏</strong>的性质：<code>node->left->Npl >= node->right->Npl</code>；</li>
<li><code>node->Npl = node->right->Npl + 1</code>；</li>
<li>右路径上存在<code>r</code>个节点的左偏堆，其节点数<code>N</code>满足 $N \leq 2^{r} - 1$；</li>
</ol>
</li>
</ul>
<h4 id="operations">Operations</h4>
<blockquote>
<p>声明结构体如下（小顶堆为例）：</p>
</blockquote>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="c"><code><span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> Element_type</span><span style="color:#F97583"> int</span></span>
<span class="line"><span style="color:#F97583">typedef</span><span style="color:#F97583"> struct</span><span style="color:#E1E4E8"> heap_node{</span></span>
<span class="line"><span style="color:#E1E4E8">    Element_type element;</span></span>
<span class="line"><span style="color:#F97583">    struct</span><span style="color:#E1E4E8"> heap_node</span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> left;</span></span>
<span class="line"><span style="color:#F97583">    struct</span><span style="color:#E1E4E8"> heap_node</span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> right;</span></span>
<span class="line"><span style="color:#F97583">    int</span><span style="color:#E1E4E8"> Npl;</span></span>
<span class="line"><span style="color:#E1E4E8">}heap_node;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">typedef</span><span style="color:#E1E4E8"> heap_node</span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> leftist_heap;</span></span>
<span class="line"></span></code></pre>
<br>
<h5 id="mergeab">merge(A,B)</h5>
<p><br>确保A的堆顶元素较小，将A的右子树与B的根节点合并，得到新的堆；递归执行且每次检查是否满足左偏的性质。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="c"><code><span class="line"><span style="color:#E1E4E8">leftist_heap </span><span style="color:#B392F0">merge</span><span style="color:#E1E4E8">(leftist_heap </span><span style="color:#FFAB70">H1</span><span style="color:#E1E4E8">, leftist_heap </span><span style="color:#FFAB70">H2</span><span style="color:#E1E4E8"> ){</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8">( H1 </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> NULL</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">return</span><span style="color:#E1E4E8"> H2;</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8">( H2 </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> NULL</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">return</span><span style="color:#E1E4E8"> H1;</span></span>
<span class="line"><span style="color:#6A737D">    //make sure H1 is the smaller one</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8">( H1->element </span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8"> H2->element)</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#B392F0"> merge1</span><span style="color:#E1E4E8">(H1, H2);</span></span>
<span class="line"><span style="color:#F97583">    else</span><span style="color:#F97583"> return</span><span style="color:#B392F0"> merge1</span><span style="color:#E1E4E8">(H2, H1);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">leftist_heap </span><span style="color:#B392F0">merge1</span><span style="color:#E1E4E8">(leftist_heap </span><span style="color:#FFAB70">H1</span><span style="color:#E1E4E8">, leftist_heap </span><span style="color:#FFAB70">H2</span><span style="color:#E1E4E8"> ){</span></span>
<span class="line"><span style="color:#6A737D">    //case 1: H1 is a leaf node, and it must has left child</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8">( H1->left </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> NULL</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">        H1->left </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> H2;</span></span>
<span class="line"><span style="color:#F97583">    else</span><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#E1E4E8">        H1->right </span><span style="color:#F97583">=</span><span style="color:#B392F0"> merge</span><span style="color:#E1E4E8">(H1->right, H2);</span></span>
<span class="line"><span style="color:#6A737D">        //update Npl if necessary</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8">(H1->left->Npl </span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8"> H1->right->Npl){</span></span>
<span class="line"><span style="color:#6A737D">            //swap children</span></span>
<span class="line"><span style="color:#E1E4E8">            heap_node</span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> temp </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> H1->left;</span></span>
<span class="line"><span style="color:#E1E4E8">            H1->left </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> H1->right;</span></span>
<span class="line"><span style="color:#E1E4E8">            H1->right </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> temp;</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#6A737D">        //update Npl of H1</span></span>
<span class="line"><span style="color:#E1E4E8">        H1->Npl </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> H1->right->Npl;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> H1;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<blockquote>
<p><code>merge</code>操作是左偏堆操作当中的核心部分，<code>insert</code>与<code>delete</code>都可以基于<code>merge</code>操作实现。</p>
</blockquote>
<h5 id="inserthx">insert(H,x)</h5>
<blockquote>
<p>利用<code>merge(H,x)</code>来实现，即将新节点视作一个用<code>x</code>填充的最小堆，然后与原堆合并.</p>
</blockquote>
<h5 id="delete">delete</h5>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="c"><code><span class="line"><span style="color:#E1E4E8">leftist_heap </span><span style="color:#B392F0">delete</span><span style="color:#E1E4E8">(heap_node</span><span style="color:#F97583">*</span><span style="color:#FFAB70"> cur</span><span style="color:#E1E4E8">, Element_type </span><span style="color:#FFAB70">x</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#6A737D">    //cur not exist -> return</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8">( cur </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> NULL</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">return</span><span style="color:#79B8FF"> NULL</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    //merge its children and replace it with the result</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8">( cur->element </span><span style="color:#F97583">==</span><span style="color:#E1E4E8"> x){</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#B392F0"> merge</span><span style="color:#E1E4E8">( cur->left, cur->right);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span><span style="color:#F97583">else</span><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#6A737D">        //recurse on the left or right subtree</span></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8">(cur->element </span><span style="color:#F97583">></span><span style="color:#E1E4E8"> x)</span></span>
<span class="line"><span style="color:#F97583">            return</span><span style="color:#E1E4E8"> cur;</span><span style="color:#6A737D"> //not found</span></span>
<span class="line"><span style="color:#E1E4E8">        </span></span>
<span class="line"><span style="color:#E1E4E8">        cur->left </span><span style="color:#F97583">=</span><span style="color:#B392F0"> delete</span><span style="color:#E1E4E8">(cur->left, x);</span></span>
<span class="line"><span style="color:#E1E4E8">        cur->right </span><span style="color:#F97583">=</span><span style="color:#B392F0"> delete</span><span style="color:#E1E4E8">(cur->right, x);</span></span>
<span class="line"><span style="color:#6A737D">        //no need to check if child exists</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">        int</span><span style="color:#E1E4E8"> left_Npl </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> cur->left </span><span style="color:#F97583">?</span><span style="color:#E1E4E8"> cur->left->Npl </span><span style="color:#F97583">:</span><span style="color:#F97583"> -</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">        int</span><span style="color:#E1E4E8"> right_Npl </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> cur->right </span><span style="color:#F97583">?</span><span style="color:#E1E4E8"> cur->right->Npl </span><span style="color:#F97583">:</span><span style="color:#F97583"> -</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">        if</span><span style="color:#E1E4E8">(left_Npl </span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8"> right_Npl){</span></span>
<span class="line"><span style="color:#6A737D">            //swap children</span></span>
<span class="line"><span style="color:#E1E4E8">            heap_node</span><span style="color:#F97583">*</span><span style="color:#E1E4E8"> temp </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> cur->left;</span></span>
<span class="line"><span style="color:#E1E4E8">            cur->left </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> cur->right;</span></span>
<span class="line"><span style="color:#E1E4E8">            cur->right </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> temp;</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#6A737D">        //update Npl of cur</span></span>
<span class="line"><span style="color:#E1E4E8">        cur->Npl </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> ((cur->right </span><span style="color:#F97583">==</span><span style="color:#79B8FF"> NULL</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">?</span><span style="color:#F97583"> -</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> :</span><span style="color:#E1E4E8"> cur->right->Npl);  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> cur;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<blockquote>
<p>令空节点的<code>Npl</code>为<code>-1</code>，便于计算；</p>
</blockquote>
<hr>
<h2 id="skew-heap">Skew Heap</h2>
<ul>
<li>为什么我们需要斜堆？
<ul>
<li><strong>Target</strong>: Any M consecutive operations take at most O(M log N) time.</li>
</ul>
</li>
<li>斜堆是左偏堆的一个简化版本：
<ul>
<li>相比于频繁检查左偏性质并进行维护的左偏堆，斜堆为了达到<code>Target</code>，放弃了这种性质；</li>
<li>取而代之是，斜堆在每次操作之后总是 交换其左右孩子，直到右路径上的最大节点不具有左孩子；
<blockquote>
<p>Always swap the left and right children except that the largest of all the nodes on the right paths does not have its children swapped.  No Npl.</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="势能分析">势能分析</h3>
<h3 id="shortcut-for-merge">Shortcut for merge</h3>
<ul>
<li>对于给出的两个堆，可以通过快速手算的方式一次构建结果；</li>
<li>Steps:
<ol>
<li>取出两个堆的右路径上的所有节点，包含其左子树；</li>
<li>按从小到大的顺序合并节点，得到新的堆；</li>
<li>在此过程中保持原先的左子树结构不变，然后根据<code>leftist</code> / <code>skew</code> 性质调整其结构；
<ol>
<li><code>leftist</code>：如果左子树的<code>Npl</code>小于右子树的<code>Npl</code>，则交换左右孩子；</li>
<li><code>skew</code>：总是交换左右孩子（我们可以由此发现，此时左路经上的节点正是步骤<code>2</code>得到的有序序列）；</li>
</ol>
</li>
<li>返回新的堆；</li>
</ol>
</li>
</ul>  <div class="bio" data-astro-cid-2jiluk5e> <strong data-astro-cid-2jiluk5e>关于作者</strong> <div class="bio-content" data-astro-cid-2jiluk5e> <img src="/avatar.jpg" alt="待抉" class="avatar" data-astro-cid-2jiluk5e> <div class="bio-text" data-astro-cid-2jiluk5e> <p class="name" data-astro-cid-2jiluk5e>待抉</p> <p class="description" data-astro-cid-2jiluk5e>热爱技术，热爱生活。分享编程经验和个人思考。</p> </div> </div> </div>  </div> <nav class="toc" data-astro-cid-xvrfupwn> <ul id="toc-list" data-astro-cid-xvrfupwn></ul> </nav>   </article> </main> <footer data-astro-cid-sz7xmlte> <div class="footer-content" data-astro-cid-sz7xmlte> <p class="copyright" data-astro-cid-sz7xmlte>&copy; 2024 待抉. All rights reserved.</p> <div class="social-links" data-astro-cid-sz7xmlte> <a href="https://m.webtoo.ls/@astro" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Follow Astro on Mastodon</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-sz7xmlte><path fill="currentColor" d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://twitter.com/astrodotbuild" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Follow Astro on Twitter</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-sz7xmlte><path fill="currentColor" d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://github.com/withastro/astro" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Go to Astro's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-sz7xmlte><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path></svg> </a> </div> </div> </footer>  </body></html>